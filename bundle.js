(()=>{"use strict";var n={56:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},72:n=>{var t=[];function e(n){for(var e=-1,o=0;o<t.length;o++)if(t[o].identifier===n){e=o;break}return e}function o(n,o){for(var i={},r=[],c=0;c<n.length;c++){var s=n[c],d=o.base?s[0]+o.base:s[0],l=i[d]||0,p="".concat(d," ").concat(l);i[d]=l+1;var u=e(p),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var f=a(m,o);o.byIndex=c,t.splice(c,0,{identifier:p,updater:f,references:1})}r.push(p)}return r}function a(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,a){var i=o(n=n||[],a=a||{});return function(n){n=n||[];for(var r=0;r<i.length;r++){var c=e(i[r]);t[c].references--}for(var s=o(n,a),d=0;d<i.length;d++){var l=e(i[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=s}}},113:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map(function(t){var e="",o=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),o&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),o&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e}).join("")},t.i=function(n,e,o,a,i){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(o)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(r[s]=!0)}for(var d=0;d<n.length;d++){var l=[].concat(n[d]);o&&r[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},365:(n,t,e)=>{e.d(t,{A:()=>c});var o=e(601),a=e.n(o),i=e(314),r=e.n(i)()(a());r.push([n.id,"body {\n  font-family: Arial, sans-serif;\n  background: #f7f7f7;\n  margin: 0;\n  padding: 0;\n}\n\n.app-container {\n  margin: 40px auto;\n  max-width: 900px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n  padding: 40px 30px;\n  position: relative;\n}\n\n.add-ticket-btn {\n  position: absolute;\n  right: 30px;\n  top: 30px;\n  padding: 12px 28px;\n  border: 1px solid #888;\n  border-radius: 16px;\n  background: #fff;\n  font-size: 18px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.add-ticket-btn:hover {\n  background: #f0f0f0;\n}\n\n.tickets-list {\n  margin-top: 60px;\n}\n\n.ticket-row {\n  display: flex;\n  align-items: center;\n  border: 1px solid #888;\n  border-radius: 4px;\n  margin-bottom: 10px;\n  padding: 18px 16px;\n  background: #fff;\n  transition: box-shadow 0.2s;\n}\n.ticket-row.selected {\n  box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n}\n\n.ticket-checkbox {\n  width: 28px;\n  height: 28px;\n  border: 2px solid #888;\n  border-radius: 50%;\n  margin-right: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 20px;\n}\n.ticket-checkbox.checked {\n  background: #e0e0e0;\n}\n\n.ticket-name {\n  flex: 1;\n  font-size: 20px;\n  cursor: pointer;\n}\n.ticket-date {\n  width: 160px;\n  text-align: right;\n  color: #888;\n  font-size: 16px;\n  margin-left: 20px;\n}\n.ticket-actions {\n  display: flex;\n  gap: 10px;\n  margin-left: 20px;\n}\n.ticket-action-btn {\n  width: 36px;\n  height: 36px;\n  border: 1px solid #888;\n  border-radius: 50%;\n  background: #fff;\n  font-size: 18px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n}\n.ticket-action-btn:hover {\n  background: #f0f0f0;\n}\n\n.ticket-description {\n  word-break: break-word;\n  margin-top: 10px;\n  margin-left: 46px;\n  color: #444;\n  font-size: 17px;\n  white-space: pre-line;\n}\n\n/* Модальные окна */\n.modal-overlay {\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background: rgba(0,0,0,0.18);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.modal {\n  background: #fff;\n  border-radius: 16px;\n  padding: 36px 38px 28px 38px;\n  min-width: 420px;\n  box-shadow: 0 2px 16px rgba(0,0,0,0.12);\n  position: relative;\n}\n.modal-title {\n  font-size: 22px;\n  margin-bottom: 18px;\n}\n.modal-label {\n  font-size: 17px;\n  margin-bottom: 6px;\n  display: block;\n}\n.modal-input, .modal-textarea {\n  width: 100%;\n  font-size: 17px;\n  margin-bottom: 18px;\n  padding: 8px 10px;\n  border: 1px solid #bbb;\n  border-radius: 6px;\n  box-sizing: border-box;\n}\n.modal-textarea {\n  min-height: 70px;\n  resize: vertical;\n}\n.modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 18px;\n}\n.modal-btn {\n  padding: 8px 28px;\n  border: 1px solid #888;\n  border-radius: 12px;\n  background: #fff;\n  font-size: 17px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.modal-btn:hover {\n  background: #f0f0f0;\n}\n\n/* Loader */\n.loader {\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #888;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  animation: spin 1s linear infinite;\n  margin: 40px auto;\n}\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n",""]);const c=r},540:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var t={};n.exports=function(n,e){var o=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var a=void 0!==e.layer;a&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,a&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var i=e.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}}},t={};function e(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={id:o,exports:{}};return n[o](i,i.exports,e),i.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.nc=void 0;const o="http://localhost:7070/";async function a(n){return(await fetch(`${o}?method=ticketById&id=${n}`)).json()}async function i(n,{name:t,description:e,status:a}){return(await fetch(`${o}?method=updateById&id=${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,description:e,status:a})})).json()}var r=e(72),c=e.n(r),s=e(825),d=e.n(s),l=e(659),p=e.n(l),u=e(56),m=e.n(u),f=e(540),b=e.n(f),x=e(113),v=e.n(x),h=e(365),g={};function y({mode:n,ticket:t={},onOk:e,onCancel:o}){const a=document.querySelector(".modal-overlay");a&&a.remove();const i=document.createElement("div");i.className="modal-overlay",i.innerHTML=`\n    <div class="modal">\n      <div class="modal-title">${"add"===n?"Добавить тикет":"Изменить тикет"}</div>\n      <label class="modal-label">Краткое описание\n        <input class="modal-input" name="name" value="${t.name||""}" />\n      </label>\n      <label class="modal-label">Подробное описание\n        <textarea class="modal-textarea" name="description">${t.description||""}</textarea>\n      </label>\n      <div class="modal-actions">\n        <button class="modal-btn cancel-btn">Отмена</button>\n        <button class="modal-btn ok-btn">Ok</button>\n      </div>\n    </div>\n  `,document.body.appendChild(i),i.querySelector(".cancel-btn").onclick=()=>{i.remove(),o&&o()},i.querySelector(".ok-btn").onclick=()=>{const n=i.querySelector('input[name="name"]').value.trim(),t=i.querySelector('textarea[name="description"]').value.trim();n?(i.remove(),e&&e({name:n,description:t})):alert("Введите краткое описание")}}g.styleTagTransform=v(),g.setAttributes=m(),g.insert=p().bind(null,"head"),g.domAPI=d(),g.insertStyleElement=b(),c()(h.A,g),h.A&&h.A.locals&&h.A.locals;const k=document.querySelector(".tickets-list");async function w(){k.innerHTML='<div class="loader"></div>';try{n=await async function(){return(await fetch(`${o}?method=allTickets`)).json()}(),(t=k).innerHTML="",n.forEach(n=>{const e=document.createElement("div");e.className="ticket-row",n.status&&e.classList.add("selected"),e.innerHTML=`\n      <div class="ticket-checkbox${n.status?" checked":""}" data-id="${n.id}">${n.status?"✔":""}</div>\n      <div class="ticket-name" data-id="${n.id}">${n.name}</div>\n      <div class="ticket-date">${function(n){const t=new Date(n);return t.toLocaleDateString("ru-RU")+" "+t.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}(n.created)}</div>\n      <div class="ticket-actions">\n        <button class="ticket-action-btn edit-btn" data-id="${n.id}" title="Редактировать">✎</button>\n        <button class="ticket-action-btn delete-btn" data-id="${n.id}" title="Удалить">×</button>\n      </div>\n    `,t.appendChild(e)})}catch(n){k.innerHTML='<div style="color:red">Ошибка загрузки тикетов</div>'}var n,t}document.querySelector(".add-ticket-btn").addEventListener("click",()=>{y({mode:"add",onOk:async({name:n,description:t})=>{await async function({name:n,description:t,status:e}){return(await fetch(`${o}?method=createTicket`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,description:t,status:e})})).json()}({name:n,description:t,status:!1}),w()}})}),k.addEventListener("click",async n=>{const t=n.target,e=t.closest(".ticket-row");if(!e)return;const r=t.dataset.id;if(t.classList.contains("ticket-checkbox")){const n=await a(r);return await i(r,{name:n.name,description:n.description,status:!n.status}),void w()}if(t.classList.contains("edit-btn")){const n=await a(r);return void y({mode:"edit",ticket:n,onOk:async({name:t,description:e})=>{await i(r,{name:t,description:e,status:n.status}),w()}})}if(t.classList.contains("delete-btn"))!function({onOk:n,onCancel:t}){const e=document.querySelector(".modal-overlay");e&&e.remove();const o=document.createElement("div");o.className="modal-overlay",o.innerHTML='\n    <div class="modal">\n      <div class="modal-title">Удалить тикет</div>\n      <div style="margin-bottom: 24px;">Вы уверены, что хотите удалить тикет? Это действие необратимо.</div>\n      <div class="modal-actions">\n        <button class="modal-btn cancel-btn">Отмена</button>\n        <button class="modal-btn ok-btn">Ok</button>\n      </div>\n    </div>\n  ',document.body.appendChild(o),o.querySelector(".cancel-btn").onclick=()=>{o.remove(),t&&t()},o.querySelector(".ok-btn").onclick=()=>{o.remove(),n&&n()}}({onOk:async()=>{await async function(n){return fetch(`${o}?method=deleteById&id=${n}`)}(r),w()}});else if(t.classList.contains("ticket-name"))return void function(n,t){const e=n.nextElementSibling;if(e&&e.classList.contains("ticket-description"))return void e.remove();const o=document.createElement("div");o.className="ticket-description",o.textContent=t,n.insertAdjacentElement("afterend",o)}(e,(await a(r)).description)}),w()})();